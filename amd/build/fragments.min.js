define ("report_vmoodle/fragments",["jquery","core/config","core/log"],function($,cfg,log){var reportfragment={init:function init(){$(".delegated-content").each(function(){$(this).promise().done(reportfragment.fragmentloader(this))});log.debug("ADM Vmoodle Report Report fragment initialized")},fragmentloader:function fragmentloader(elm){var that=$(elm),url=cfg.wwwroot+"/report/vmoodle/ajax/service.php";url+="?what=getfragment";url+="&fragment="+that.attr("delegated-fragment");url+="&wwwroot="+that.attr("delegated-context");url+="&filter="+that.attr("delegated-filter");$.get(url,function(data){var newval;log.debug("Feeding tr[delegated-context=\""+data.source+"\"]");$("tr[delegated-context=\""+data.source+"\"]").html(data.html);for(var field in data.data){newval=parseInt($("#sumator-"+field).html());log.debug("ADM Vmoodle updating field "+field);log.debug("ADM orgin value "+newval);$("#sumator-"+field).html(newval+parseInt(data.data[field]))}$(".sumator-ratio").each(function(){var that=$(this),formula=that.attr("data-formula"),regexp="/(sumator-[/w]+)/",vars=formula.match(regexp);for(var variable in vars){varvalue=parseInt($(variable).html());formula.replace(variable,varvalue)}var ratioresult=eval(formula);this.html("("+ratioresult+"% )")})},"json")}};return reportfragment});
//# sourceMappingURL=fragments.min.js.map
